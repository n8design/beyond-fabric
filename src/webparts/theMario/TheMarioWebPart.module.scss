@import '~@microsoft/sp-office-ui-fabric-core/dist/sass/SPFabricCore.scss';

.theMario {

  $pixel-size: 8px;
  $sprite-w: 16;
  $sprite-h: 16;
  $pixel-count: $sprite-w * $sprite-h;

  $palette: (#af322a #6a6b14 #e29c35);
  $sprite-1: (
    0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 2 2 2
      3 3 2 3 0 0 0 0 0 0 0 0 2 3 2 3 3 3 2 3 3 3 0 0 0 0 0 0 2 3 2 2 3 3 3 2 3 3
      3 0 0 0 0 0 2 2 3 3 3 3 2 2 2 2 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 0 0 0 0 0 0 0
      0 2 2 1 2 2 2 0 0 0 0 0 0 0 0 0 2 2 2 1 2 2 1 2 2 2 0 0 0 0 0 2 2 2 2 1 1 1
      1 2 2 2 2 0 0 0 0 3 3 2 1 3 1 1 3 1 2 3 3 0 0 0 0 3 3 3 1 1 1 1 1 1 3 3 3 0
      0 0 0 3 3 1 1 1 1 1 1 1 1 3 3 0 0 0 0 0 0 1 1 1 0 0 1 1 1 0 0 0 0 0 0 0 2 2
      2 0 0 0 0 2 2 2 0 0 0 0 0 2 2 2 2 0 0 0 0 2 2 2 2 0 0
  );
  $sprite-2: (
    0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1
      1 1 1 1 1 1 0 0 0 0 0 0 0 2 2 2 3 3 2 3 0 0 0 0 0 0 0 0 2 3 2 3 3 3 2 3 3 3
      0 0 0 0 0 0 2 3 2 2 3 3 3 2 3 3 3 0 0 0 0 0 2 2 3 3 3 3 2 2 2 2 0 0 0 0 0 0
      0 0 3 3 3 3 3 3 3 0 0 0 0 0 0 0 0 2 2 2 2 1 2 0 3 0 0 0 0 0 0 0 3 2 2 2 2 2
      2 3 3 3 0 0 0 0 0 3 3 1 2 2 2 2 2 3 3 0 0 0 0 0 0 2 2 1 1 1 1 1 1 1 0 0 0 0
      0 0 0 2 1 1 1 1 1 1 1 1 0 0 0 0 0 0 2 2 1 1 1 0 1 1 1 0 0 0 0 0 0 0 2 0 0 0
      0 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 0 0 0 0 0 0
  );
  $sprite-3: (
    0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 2 2 2
      3 3 2 3 0 0 0 0 0 0 0 0 2 3 2 3 3 3 2 3 3 3 0 0 0 0 0 0 2 3 2 2 3 3 3 2 3 3
      3 0 0 0 0 0 2 2 3 3 3 3 2 2 2 2 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 0 0 0 0 0 0 0
      0 2 2 1 2 2 2 0 0 0 0 0 0 0 0 0 2 2 2 2 1 1 2 2 0 0 0 0 0 0 0 0 2 2 2 1 1 3
      1 1 3 0 0 0 0 0 0 0 2 2 2 2 1 1 1 1 1 0 0 0 0 0 0 0 1 2 2 3 3 3 1 1 1 0 0 0
      0 0 0 0 0 1 2 3 3 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 2 2 2 0 0 0 0 0 0 0 0 0 0
      2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 2 2 2 2 0 0 0 0 0 0 0
  );
  $sprite-4: (
    0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 2 2 2
      3 3 2 3 0 0 0 0 0 0 0 0 2 3 2 3 3 3 2 3 3 3 0 0 0 0 0 0 2 3 2 2 3 3 3 2 3 3
      3 0 0 0 0 0 2 2 3 3 3 3 2 2 2 2 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 0 0 0 0 0 0 2
      2 2 2 1 1 2 2 0 0 0 0 0 0 3 3 2 2 2 2 1 1 1 2 2 2 3 3 3 0 3 3 3 0 2 2 1 3 1
      1 1 2 2 3 3 0 3 3 0 0 1 1 1 1 1 1 1 0 0 2 0 0 0 0 0 1 1 1 1 1 1 1 1 1 2 2 0
      0 0 0 1 1 1 1 1 1 1 1 1 1 2 2 0 0 0 2 2 1 1 1 0 0 0 1 1 1 2 2 0 0 0 2 2 2 0
      0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0 0
  );
  $anim-run: (
    $sprite-1,
    $sprite-2,
    $sprite-3,
    $sprite-4
  );
  $duration: 0.5s;

    display: flex;
    justify-content: center;
    align-items: center;
    height: 30vh;
    background-color: pink;
    font-size: $pixel-size;

  section {
    display: grid;
    grid-template-columns: repeat($sprite-w, 1em);
    grid-template-rows: repeat($sprite-h, 1em);
    grid-gap: 0;

    div {
      width: 1em;
      height: 1em;
      background-color: transparent;
    }
  }

  @mixin fill($index: 1) {
    @if $index == 0 {
      background-color: transparent;
    } @else {
      background-color: nth($palette, $index);
    }
  }

  @mixin animate($anim, $dur: 1s) {
    @for $i from 1 through $pixel-count {
      $pmap: ();
      $change: false;
      @for $j from 1 through length($anim) {
        $sprite: nth($anim, $j);
        $pmap: map-merge($pmap,  ($j : nth($sprite, $i)));
      }
      @if map-get($pmap, 1) > 0 {
        div:nth-child(#{$i}) {
          background-color: nth($palette, map-get($pmap, 1));
        }
      }
      @for $k from 1 to length($pmap) {
        @if map-get($pmap, $k) != map-get($pmap, $k+1) {
          $change: true;
          @break;
        }
      }
      @if $change == true {
        $anim-step: 100 / length($pmap);
        @keyframes move-#{$i} {
          @for $k from 0 to length($pmap) {
            #{$k * $anim-step * 1%} {
              @include fill(map-get($pmap, $k+1));
            }
          }
        }
        div:nth-child(#{$i}) {
          animation: move-#{$i} $dur steps(1) infinite;
        }
      }
    }
  }

  @include animate($anim-run, $duration);
}


.credits{
  font-size: 1rem !important;
  display: block;
  padding: 0.4em 2em 0.5em;
  background-color: pink;
  text-align: center;
}
